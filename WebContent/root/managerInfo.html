<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>航材仓库管理系统</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/fonts.css">
    <link rel="stylesheet" href="assets/font-awesome/css/font-awesome.min.css">

    <!-- PAGE LEVEL PLUGINS STYLES -->
    <!-- REQUIRE FOR SPEECH COMMANDS -->
    <link rel="stylesheet" type="text/css" href="assets/css/plugins/gritter/jquery.gritter.css" />

    <!-- Tc core CSS -->
    <link id="qstyle" rel="stylesheet" href="assets/css/themes/style.css">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.15.4/dist/bootstrap-table.min.css">

    <!-- Add custom CSS here -->

    <!-- End custom CSS here -->

    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->
    <style>
        #title{
            color: #bababa;
            margin-top: 10%;
            margin-left: 10%;
        }
        #button-group{
            margin-bottom: 2cm;
        }
        #update-button{
            width: 3cm;
            float: right;
            margin-left: 10px;
        }
        #info-id{
            text-align:left;
            margin-left:20%;
        }

    </style>
</head>

<body>
<div id="wrapper">
    <div id="main-container">
        <!--		顶部导航栏-->
        <nav class="navbar-top" role="navigation">
            <!--			顶栏标语-->
            <div class="navbar-header">
                <h3 id="title">  Hello,  root</h3>
            </div>
            <!--			顶栏图标-->
            <div class="nav-top">
                <ul class="nav navbar-right">
                    <li>
                        <a href="#" class="fa fa-bell-o"></a>
                    </li>
                    <li>
                        <a href="#" class="fa fa-sign-out"></a>
                    </li>
                </ul>
            </div>
        </nav>
        <!--		侧边导航栏-->
        <nav class="navbar-side" role="navigation">
            <div class="navbar-collapse sidebar-collapse collapse">
                <ul id="side" class="nav navbar-nav side-nav">
                    <li>
                        <h4>导航</h4>
                    </li>
                    <li class="panel">
                        <a href="/AMWMS/root/userList.html" data-parent="#side" data-toggle="collapse" class="accordion-toggle" data-target="#components">
                            <i class="fa fa-cogs"></i> 用户列表
                        </a>
                    </li>
                    <li class="panel">
                        <a href="/AMWMS/root/managerList.html" data-parent="#side" data-toggle="collapse" class="accordion-toggle" data-target="#components">
                            <i class="fa fa-cogs"></i> 管理员列表
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <!--			主要内容-->
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumbs">
                        <ul class="breadcrumb">
                            <li>
                                <a href="/AMWMS/root/userInfo">用户信息</a>
                            </li>
                            <li>
                                <a href="/AMWMS/root/userList">用户列表</a>
                            </li>
                            <li class="active">权限编辑</li>
                        </ul>
                        <div class="b-right hidden-xs">
                            <ul>
                                <li><a href="#" title=""><i class="fa fa-signal"></i></a></li>
                                <li><a href="#" title=""><i class="fa fa-comments"></i></a></li>
                                <li class="dropdown"><a href="#" title="" data-toggle="dropdown"><i class="fa fa-plus"></i></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page-header no-padding-bottom">
                <h4>权限编辑&nbsp;&nbsp;&nbsp;<small>修改此用户的管理权限</small>
                </h4>
            </div>
            <!--					大面板-->
            <div class="row">
                <div class="col-lg-12">
                    <div class="portlet">
                        <div class="portlet-heading dark">
                            <div class="portlet-title">
                                <h4 style="">信息填写</h4>
                            </div>
                        </div>
                        <!--							输入框组-->
                        <div class="portlet-body" id="info-group">
                            <form class="form-horizontal" id="addForm" >
                                <div id="info-id">
                                    <!--									用户ID-->
                                    <div class="form-group">
                                        <label class="control-label">用户ID:
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <span id="userId-info">test</span>
                                        </label>
                                    </div>
                                    <!--									用户名-->
                                    <div class="form-group">
                                        <label class="control-label">用户名:
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <span id="userName-info">黄晓明</span>
                                        </label>
                                    </div>
                                    <!--									密码-->
                                    <div class="form-group">
                                        <label class="control-label">密码:
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <span id="pwd-info">12345678</span>
                                        </label>
                                    </div>
                                    <hr class="separator" />

                                    <!--									备注-->
                                    <div class="form-group">
                                        <label class="control-label">备注:
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            无
                                        </label>
                                    </div>
                                </div>
                                <br>
                                <!--									权限-->
                                <div class="form-group" style="margin-left: 10%">
                                    <label class="col-sm-2 control-label">权限分配</label>
                                    <div class="col-sm-3">
                                        <select class="form-control selectpicker" id="duty-info">
                                            <option>管理员</option>
                                            <option>普通用户</option>
                                        </select>
                                    </div>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
            <!--					按钮组-->
            <div id="button-group">
                <button type="button" class="btn btn-primary" id="update-button">NEXT</button>
            </div>
        </div>
    </div>
</div>
</div>

<!-- core JavaScript -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="assets/js/plugins/pace/pace.min.js"></script>

<!-- PAGE LEVEL PLUGINS JS -->
<script src="assets/js/plugins/fuelux/wizard.min.js"></script>
<script src="assets/js/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js"></script>
<script src="assets/js/plugins/jquery-validation/jquery.validate.min.js"></script>
<script src="assets/js/plugins/jquery-validation/additional-methods.min.js"></script>

<!-- Themes Core Scripts -->
<script src="assets/js/main.js"></script>

<!-- REQUIRE FOR SPEECH COMMANDS -->
<script src="assets/js/speech-commands.js"></script>
<script src="assets/js/plugins/gritter/jquery.gritter.min.js"></script>

<!-- initial page level scripts for examples -->
<script src="assets/js/plugins/slimscroll/jquery.slimscroll.init.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.15.4/dist/bootstrap-table.min.js"></script>

<script>
    $(function () {
        //获得数据
        var checkUserId = window.location.href.split("=")[1];
        var url = "/AMWMS/user?identity=root&&req=user&&userId="+checkUserId;//通过用户id获得数据
        var jsons;
        $.post(url,
            {"userId":checkUserId},
            function(result){
                jsons = $.parseJSON(result);
                var record = jsons[0];
                document.getElementById("userId-info").innerHTML = record.userId;
                document.getElementById("userName-info").innerHTML = record.userName;
                document.getElementById("pwd-info").innerHTML = record.pwd;
            });
        $('#update-button').click(function () {
            var duty = document.getElementById('duty-info').value;
            if (duty === '管理员') {
            	window.location.href = "/AMWMS/root/storageArrange.html?userId="+checkUserId;//跳转至管理员信息页面
            } else if (duty === '普通用户') {
                $.ajax({
                    url:'/AMWMS/userarrange?operate=update&&duty=user&&userId='+checkUserId,//将duty字段改为user
                    success:function (msg) {
                    	var json = $.parseJSON(msg);
                        if (json.flag) {
                            alert("更新成功");
                            window.location.href = "/AMWMS/root/userList.html"; //跳转至普通用户界面
                        } else {
                            alert("系统繁忙，请稍后再试");
                        }
                    }
                })
            }
        })
    })


</script>

</body>
</html>